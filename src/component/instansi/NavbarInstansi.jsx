import { Navbar, NavbarBrand } from "flowbite-react";
import { FaUserAlt } from "react-icons/fa";
import { IoSunnyOutline } from "react-icons/io5";
import { MdDarkMode } from "react-icons/md";
import { useEffect, useState } from "react";

import { RiMenu3Line } from "react-icons/ri";
import Swal from "sweetalert2";

export default function NavbarInstansi({ darkThemeInstansi, setDarkThemeInstansi }) {
    const data_login = JSON.parse(localStorage.getItem('login-instansi'));

    useEffect(() => {
        darkThemeInstansi
            ? document.querySelector("html").classList.replace("light", "dark")
            : document.querySelector("html").classList.replace("dark", "light");
    }, [darkThemeInstansi]);

    const handleAlertMenu = () => {
        Swal.fire({
            width: "98%",
            footer: `
                <div style="display: flex; align-items: center; gap: 8px; justify-content: right; color:black;">
                    <span>John Doe</span>
                    <i class="fa fa-user-circle"></i>
                </div>
            `,
            html: `
                <div style="display: flex; flex-direction: column; gap: 10px; padding: 10px; margin-top:15px;">
                    <button id="mode-terang" class="swal2-confirm swal2-styled" style="background-color: #dfedf9; color: #111;" onC>ðŸŒž Mode Terang</button>
                    <button id="mode-gelap" class="swal2-confirm swal2-styled" style="background-color: #111827;">ðŸŒ™ Mode Gelap</button>
                </div>
            `,
            showConfirmButton: false,
            showCloseButton: true,
            didOpen: () => {
                document.getElementById("mode-terang").addEventListener("click", () => {
                    setDarkThemeInstansi(false);
                    Swal.close();
                });
                document.getElementById("mode-gelap").addEventListener("click", () => {
                    setDarkThemeInstansi(true);
                    Swal.close();
                });
            },
        });
    };

    return (
        <Navbar fluid className="p-4 w-full sticky top-0 z-20 dark:bg-gray-800">
            <div className="flex items-center gap-2">
                <NavbarBrand>
                    <svg className="w-28 h-8" viewBox="0 0 188 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M8.48 22.21C6.94 22.21 5.56 21.96 4.34 21.46C3.12 20.96 2.14 20.22 1.4 19.24C0.68 18.26 0.3 17.08 0.26 15.7H5.72C5.8 16.48 6.07 17.08 6.53 17.5C6.99 17.9 7.59 18.1 8.33 18.1C9.09 18.1 9.69 17.93 10.13 17.59C10.57 17.23 10.79 16.74 10.79 16.12C10.79 15.6 10.61 15.17 10.25 14.83C9.91 14.49 9.48 14.21 8.96 13.99C8.46 13.77 7.74 13.52 6.8 13.24C5.44 12.82 4.33 12.4 3.47 11.98C2.61 11.56 1.87 10.94 1.25 10.12C0.63 9.3 0.32 8.23 0.32 6.91C0.32 4.95 1.03 3.42 2.45 2.32C3.87 1.2 5.72 0.64 8 0.64C10.32 0.64 12.19 1.2 13.61 2.32C15.03 3.42 15.79 4.96 15.89 6.94H10.34C10.3 6.26 10.05 5.73 9.59 5.35C9.13 4.95 8.54 4.75 7.82 4.75C7.2 4.75 6.7 4.92 6.32 5.26C5.94 5.58 5.75 6.05 5.75 6.67C5.75 7.35 6.07 7.88 6.71 8.26C7.35 8.64 8.35 9.05 9.71 9.49C11.07 9.95 12.17 10.39 13.01 10.81C13.87 11.23 14.61 11.84 15.23 12.64C15.85 13.44 16.16 14.47 16.16 15.73C16.16 16.93 15.85 18.02 15.23 19C14.63 19.98 13.75 20.76 12.59 21.34C11.43 21.92 10.06 22.21 8.48 22.21ZM40.677 5.08C42.757 5.08 44.407 5.71 45.627 6.97C46.867 8.23 47.487 9.98 47.487 12.22V22H42.387V12.91C42.387 11.83 42.097 11 41.517 10.42C40.957 9.82 40.177 9.52 39.177 9.52C38.177 9.52 37.387 9.82 36.807 10.42C36.247 11 35.967 11.83 35.967 12.91V22H30.867V12.91C30.867 11.83 30.577 11 29.997 10.42C29.437 9.82 28.657 9.52 27.657 9.52C26.657 9.52 25.867 9.82 25.287 10.42C24.727 11 24.447 11.83 24.447 12.91V22H19.317V5.26H24.447V7.36C24.967 6.66 25.647 6.11 26.487 5.71C27.327 5.29 28.277 5.08 29.337 5.08C30.597 5.08 31.717 5.35 32.697 5.89C33.697 6.43 34.477 7.2 35.037 8.2C35.617 7.28 36.407 6.53 37.407 5.95C38.407 5.37 39.497 5.08 40.677 5.08ZM50.0548 13.6C50.0548 11.88 50.3748 10.37 51.0148 9.07C51.6748 7.77 52.5648 6.77 53.6848 6.07C54.8048 5.37 56.0548 5.02 57.4348 5.02C58.6148 5.02 59.6448 5.26 60.5248 5.74C61.4248 6.22 62.1148 6.85 62.5948 7.63V5.26H67.7248V22H62.5948V19.63C62.0948 20.41 61.3948 21.04 60.4948 21.52C59.6148 22 58.5848 22.24 57.4048 22.24C56.0448 22.24 54.8048 21.89 53.6848 21.19C52.5648 20.47 51.6748 19.46 51.0148 18.16C50.3748 16.84 50.0548 15.32 50.0548 13.6ZM62.5948 13.63C62.5948 12.35 62.2348 11.34 61.5148 10.6C60.8148 9.86 59.9548 9.49 58.9348 9.49C57.9148 9.49 57.0448 9.86 56.3248 10.6C55.6248 11.32 55.2748 12.32 55.2748 13.6C55.2748 14.88 55.6248 15.9 56.3248 16.66C57.0448 17.4 57.9148 17.77 58.9348 17.77C59.9548 17.77 60.8148 17.4 61.5148 16.66C62.2348 15.92 62.5948 14.91 62.5948 13.63ZM76.5662 8.05C77.1662 7.13 77.9162 6.41 78.8162 5.89C79.7162 5.35 80.7162 5.08 81.8162 5.08V10.51H80.4062C79.1262 10.51 78.1662 10.79 77.5262 11.35C76.8862 11.89 76.5662 12.85 76.5662 14.23V22H71.4362V5.26H76.5662V8.05ZM93.5982 17.65V22H90.9882C89.1282 22 87.6782 21.55 86.6382 20.65C85.5982 19.73 85.0782 18.24 85.0782 16.18V9.52H83.0382V5.26H85.0782V1.18H90.2082V5.26H93.5682V9.52H90.2082V16.24C90.2082 16.74 90.3282 17.1 90.5682 17.32C90.8082 17.54 91.2082 17.65 91.7682 17.65H93.5982ZM107.943 18.04H114.663V22H102.813V0.939999H107.943V18.04ZM116.09 13.6C116.09 11.88 116.41 10.37 117.05 9.07C117.71 7.77 118.6 6.77 119.72 6.07C120.84 5.37 122.09 5.02 123.47 5.02C124.65 5.02 125.68 5.26 126.56 5.74C127.46 6.22 128.15 6.85 128.63 7.63V5.26H133.76V22H128.63V19.63C128.13 20.41 127.43 21.04 126.53 21.52C125.65 22 124.62 22.24 123.44 22.24C122.08 22.24 120.84 21.89 119.72 21.19C118.6 20.47 117.71 19.46 117.05 18.16C116.41 16.84 116.09 15.32 116.09 13.6ZM128.63 13.63C128.63 12.35 128.27 11.34 127.55 10.6C126.85 9.86 125.99 9.49 124.97 9.49C123.95 9.49 123.08 9.86 122.36 10.6C121.66 11.32 121.31 12.32 121.31 13.6C121.31 14.88 121.66 15.9 122.36 16.66C123.08 17.4 123.95 17.77 124.97 17.77C125.99 17.77 126.85 17.4 127.55 16.66C128.27 15.92 128.63 14.91 128.63 13.63ZM142.601 7.63C143.101 6.85 143.791 6.22 144.671 5.74C145.551 5.26 146.581 5.02 147.761 5.02C149.141 5.02 150.391 5.37 151.511 6.07C152.631 6.77 153.511 7.77 154.151 9.07C154.811 10.37 155.141 11.88 155.141 13.6C155.141 15.32 154.811 16.84 154.151 18.16C153.511 19.46 152.631 20.47 151.511 21.19C150.391 21.89 149.141 22.24 147.761 22.24C146.601 22.24 145.571 22 144.671 21.52C143.791 21.04 143.101 20.42 142.601 19.66V29.98H137.471V5.26H142.601V7.63ZM149.921 13.6C149.921 12.32 149.561 11.32 148.841 10.6C148.141 9.86 147.271 9.49 146.231 9.49C145.211 9.49 144.341 9.86 143.621 10.6C142.921 11.34 142.571 12.35 142.571 13.63C142.571 14.91 142.921 15.92 143.621 16.66C144.341 17.4 145.211 17.77 146.231 17.77C147.251 17.77 148.121 17.4 148.841 16.66C149.561 15.9 149.921 14.88 149.921 13.6ZM165.453 22.24C163.813 22.24 162.333 21.89 161.013 21.19C159.713 20.49 158.683 19.49 157.923 18.19C157.183 16.89 156.813 15.37 156.813 13.63C156.813 11.91 157.193 10.4 157.953 9.1C158.713 7.78 159.753 6.77 161.073 6.07C162.393 5.37 163.873 5.02 165.513 5.02C167.153 5.02 168.633 5.37 169.953 6.07C171.273 6.77 172.313 7.78 173.073 9.1C173.833 10.4 174.213 11.91 174.213 13.63C174.213 15.35 173.823 16.87 173.043 18.19C172.283 19.49 171.233 20.49 169.893 21.19C168.573 21.89 167.093 22.24 165.453 22.24ZM165.453 17.8C166.433 17.8 167.263 17.44 167.943 16.72C168.643 16 168.993 14.97 168.993 13.63C168.993 12.29 168.653 11.26 167.973 10.54C167.313 9.82 166.493 9.46 165.513 9.46C164.513 9.46 163.683 9.82 163.023 10.54C162.363 11.24 162.033 12.27 162.033 13.63C162.033 14.97 162.353 16 162.993 16.72C163.653 17.44 164.473 17.8 165.453 17.8ZM182.064 8.05C182.664 7.13 183.414 6.41 184.314 5.89C185.214 5.35 186.214 5.08 187.314 5.08V10.51H185.904C184.624 10.51 183.664 10.79 183.024 11.35C182.384 11.89 182.064 12.85 182.064 14.23V22H176.934V5.26H182.064V8.05Z"
                            fill="url(#paint0_linear_155_808)"
                        />
                        <defs>
                            <linearGradient id="paint0_linear_155_808" x1="-1" y1="11.5" x2="188" y2="11.5" gradientUnits="userSpaceOnUse">
                                <stop stopColor="#51FF94" />
                                <stop offset="1" stopColor="#04E635" />
                            </linearGradient>
                        </defs>
                    </svg>
                </NavbarBrand>
            </div>
            <div className="text-sm items-center gap-2 hidden xs:flex">
                <p className="line-clamp-1 dark:text-white">{data_login?.email}</p>
                <span
                    className="
                                        dark:bg-gray-600 bg-gray-100
                                        cursor-pointer h-9 w-9 flex text-black
                                        items-center justify-center rounded-[50%]
                                "
                >
                    <FaUserAlt className="dark:text-white" />
                </span>
                <span
                    onClick={() => setDarkThemeInstansi(!darkThemeInstansi)}
                    className="
                                                dark:bg-sky-300 bg-amber-100
                                                cursor-pointer h-9 w-9 flex text-black
                                                items-center justify-center rounded-[50%]
                                "
                >
                    {darkThemeInstansi ? <MdDarkMode /> : <IoSunnyOutline />}
                </span>
            </div>
            <div className="flex xs:hidden relative">
                <button onClick={() => handleAlertMenu()}>
                    <RiMenu3Line className="dark:text-white text-lg cursor-pointer" />
                </button>
            </div>
        </Navbar>
    );
}
